{"ast":null,"code":"import _classCallCheck from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Like from'./Like.js';import Bookmark from'./Bookmark.js';import AddComment from'./AddComment.js';import Comments from'./Comments.js';import{getHeaders}from'../utils.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=/*#__PURE__*/function(_React$Component){_inherits(Post,_React$Component);var _super=_createSuper(Post);function Post(props){var _this;_classCallCheck(this,Post);_this=_super.call(this,props);_this.requeryPost=_this.requeryPost.bind(_assertThisInitialized(_this));_this.state={post:_this.props.model};return _this;}// componentDidMount() {\n//   console.log('Invoked immediately')\n// }\n_createClass(Post,[{key:\"requeryPost\",value:function requeryPost(){var _this2=this;console.log('requery post');fetch('api/posts/'+this.state.post.id,{method:\"GET\",headers:{// 'Authorization': getHeaders()['Authorization']\nheaders:getHeaders()}}).then(function(response){return response.json();}).then(function(data){_this2.setState({post:data});console.log('requeried');});}},{key:\"render\",value:function render(){var post=this.state.post;// console.log(post)\nreturn/*#__PURE__*/_jsxs(\"section\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:post.user.username}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-dots\"})]}),/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:'Image posted by '+post.user.username,width:\"300\",height:\"300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Like,{likeId:post.current_user_like_id,postId:post.id,requeryPost:this.requeryPost}),/*#__PURE__*/_jsx(\"i\",{className:'far fa-comment'}),/*#__PURE__*/_jsx(\"i\",{className:'far fa-paper-plane'})]}),/*#__PURE__*/_jsx(Bookmark,{bookmarkId:post.current_user_bookmark_id,postId:post.id,requeryPost:this.requeryPost})]}),/*#__PURE__*/_jsx(\"p\",{className:\"likes\",children:/*#__PURE__*/_jsx(\"strong\",{children:post.likes.length>1||post.likes.length===0?post.likes.length+\" likes\":post.likes.length+\" like\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"caption\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:post.user.username}),post.caption]}),/*#__PURE__*/_jsx(\"p\",{className:\"timestamp\",children:post.display_time})]}),/*#__PURE__*/_jsx(Comments,{comments:post.comments})]}),/*#__PURE__*/_jsx(AddComment,{postId:post.id,requeryPost:this.requeryPost})]});}}]);return Post;}(React.Component);export default Post;","map":{"version":3,"sources":["/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/src/components/Post.js"],"names":["React","Like","Bookmark","AddComment","Comments","getHeaders","Post","props","requeryPost","bind","state","post","model","console","log","fetch","id","method","headers","then","response","json","data","setState","user","username","image_url","current_user_like_id","current_user_bookmark_id","likes","length","caption","display_time","comments","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Like from './Like.js'\nimport Bookmark from './Bookmark.js'\nimport AddComment from './AddComment.js'\nimport Comments from './Comments.js'\nimport { getHeaders } from '../utils.js';\n\nclass Post extends React.Component { \n    constructor(props){\n        super(props)\n        this.requeryPost = this.requeryPost.bind(this)\n        this.state = {\n            post: this.props.model\n        }\n    }\n    \n    // componentDidMount() {\n    //   console.log('Invoked immediately')\n    // }\n\n    requeryPost() {\n        console.log('requery post')\n        \n        fetch('api/posts/' + this.state.post.id, {\n            method: \"GET\",\n            headers: {\n                // 'Authorization': getHeaders()['Authorization']\n                headers: getHeaders()\n            }\n            \n\n        }).then(response => response.json())\n        .then(data => {\n            this.setState({post: data})\n            console.log('requeried')\n        })\n    }\n\n    render () {\n        const post = this.state.post\n        // console.log(post)\n        return (\n            <section className=\"card\">\n                <div className=\"header\">\n                    <h3>{post.user.username}</h3>\n                    <i className=\"fa fa-dots\"></i>\n                </div>\n                \n                <img \n                    src={ post.image_url } \n                    alt={'Image posted by ' +  post.user.username } \n                    width=\"300\" \n                    height=\"300\" />\n                \n                <div className=\"info\">\n                    <div className = \"buttons\">\n                        <div>\n                        <Like \n                        likeId = {post.current_user_like_id}\n                        postId = {post.id}\n                        requeryPost={this.requeryPost}\n                        ></Like>\n                        <i className={'far fa-comment'}></i>\n                        <i className={'far fa-paper-plane'}></i>\n                        </div>\n                        <Bookmark\n                        bookmarkId = {post.current_user_bookmark_id}\n                        postId = {post.id}\n                        requeryPost={this.requeryPost}\n                        ></Bookmark>\n                    </div>\n                    <p className=\"likes\">\n                        <strong>{post.likes.length >1 || post.likes.length === 0 ? post.likes.length + \" likes\" : post.likes.length + \" like\"}</strong>\n                    </p>\n                    <div className=\"caption\">\n                        <p>\n                            <strong>{post.user.username}</strong>\n                            {post.caption}\n                        </p>\n                        <p className=\"timestamp\">{post.display_time}</p>\n                    </div>\n                    <Comments\n                        comments={post.comments}>\n                    </Comments>\n                </div>\n                <AddComment\n                postId={post.id}\n                requeryPost={this.requeryPost}>\n                </AddComment>\n            </section> \n        )\n    }\n}\n\nexport default Post"]},"metadata":{},"sourceType":"module"}