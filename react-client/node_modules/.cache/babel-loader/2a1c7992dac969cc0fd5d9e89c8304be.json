{"ast":null,"code":"import _classCallCheck from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{getHeaders}from'../utils.js';import Follow from'./Follow.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Suggestion=/*#__PURE__*/function(_React$Component){_inherits(Suggestion,_React$Component);var _super=_createSuper(Suggestion);function Suggestion(props){var _this;_classCallCheck(this,Suggestion);_this=_super.call(this,props);_this.toggleFollow=_this.toggleFollow.bind(_assertThisInitialized(_this));_this.state={user:_this.props.suggestion,followId:0};return _this;}_createClass(Suggestion,[{key:\"toggleFollow\",value:function toggleFollow(){console.log('button-clicked');if(this.state.followId){// issue post request\nthis.unFollow();}else{// issue delete request\nthis.follow();}}},{key:\"unFollow\",value:function unFollow(){var _this2=this;var deleteURL=\"/api/following/\".concat(this.state.followId);fetch(deleteURL,{method:\"DELETE\",headers:getHeaders()}).then(function(response){return response.json();}).then(function(data){console.log(data);_this2.setState({followId:0});});}},{key:\"follow\",value:function follow(){var _this3=this;var postData={\"user_id\":this.state.user.id};fetch(\"/api/following/\",{method:\"POST\",headers:getHeaders(),body:JSON.stringify(postData)}).then(function(response){return response.json();}).then(function(data){console.log(data);_this3.setState({followId:data.id});});}},{key:\"render\",value:function render(){var user=this.state.user;var follow_id=this.state.followId;var user_id=\"suggestion-\"+user.id;var alt_text=\"Profile pic for \"+user.username;return/*#__PURE__*/_jsxs(\"section\",{id:user_id,children:[/*#__PURE__*/_jsx(\"img\",{src:user.thumb_url,className:\"pic\",alt:alt_text}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:user.username}),/*#__PURE__*/_jsx(\"p\",{children:\"\\\"suggested for you\\\"\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Follow,{username:user.username,followId:follow_id,toggleFollow:this.toggleFollow})})]});}}]);return Suggestion;}(React.Component);export default Suggestion;","map":{"version":3,"sources":["/Users/isaacconner/Dev/Class/CS396/hw/photo-app/react-client/src/components/Suggestion.js"],"names":["React","getHeaders","Follow","Suggestion","props","toggleFollow","bind","state","user","suggestion","followId","console","log","unFollow","follow","deleteURL","fetch","method","headers","then","response","json","data","setState","postData","id","body","JSON","stringify","follow_id","user_id","alt_text","username","thumb_url","Component"],"mappings":"0tBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,aAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,C,2FAEMC,CAAAA,U,oHACF,oBAAYC,KAAZ,CAAkB,4CACd,uBAAMA,KAAN,EACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,MAAKJ,KAAL,CAAWK,UADR,CAETC,QAAQ,CAAE,CAFD,CAAb,CAHc,aAOjB,C,mDAED,uBAAe,CACXC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAEA,GAAI,KAAKL,KAAL,CAAWG,QAAf,CAAyB,CACrB;AACA,KAAKG,QAAL,GACH,CAHD,IAGO,CACH;AACA,KAAKC,MAAL,GACH,CACJ,C,wBAED,mBAAW,iBACP,GAAMC,CAAAA,SAAS,0BAAqB,KAAKR,KAAL,CAAWG,QAAhC,CAAf,CAEAM,KAAK,CAACD,SAAD,CAAY,CACbE,MAAM,CAAE,QADK,CAEbC,OAAO,CAAEjB,UAAU,EAFN,CAAZ,CAAL,CAICkB,IAJD,CAIM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAJd,EAKCF,IALD,CAKM,SAAAG,IAAI,CAAI,CACVX,OAAO,CAACC,GAAR,CAAYU,IAAZ,EACA,MAAI,CAACC,QAAL,CAAc,CACVb,QAAQ,CAAE,CADA,CAAd,EAGH,CAVD,EAWH,C,sBAED,iBAAS,iBACL,GAAMc,CAAAA,QAAQ,CAAG,CACb,UAAW,KAAKjB,KAAL,CAAWC,IAAX,CAAgBiB,EADd,CAAjB,CAGAT,KAAK,mBAAoB,CACrBC,MAAM,CAAE,MADa,CAErBC,OAAO,CAAEjB,UAAU,EAFE,CAGrByB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAHe,CAApB,CAAL,CAKCL,IALD,CAKM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EALd,EAMCF,IAND,CAMM,SAAAG,IAAI,CAAI,CACVX,OAAO,CAACC,GAAR,CAAYU,IAAZ,EACA,MAAI,CAACC,QAAL,CAAc,CACVb,QAAQ,CAAEY,IAAI,CAACG,EADL,CAAd,EAGH,CAXD,EAYH,C,sBAED,iBAAU,CACN,GAAMjB,CAAAA,IAAI,CAAG,KAAKD,KAAL,CAAWC,IAAxB,CACA,GAAMqB,CAAAA,SAAS,CAAG,KAAKtB,KAAL,CAAWG,QAA7B,CACA,GAAMoB,CAAAA,OAAO,CAAG,cAAgBtB,IAAI,CAACiB,EAArC,CACA,GAAMM,CAAAA,QAAQ,CAAG,mBAAqBvB,IAAI,CAACwB,QAA3C,CAEA,mBACI,iBAAS,EAAE,CAAEF,OAAb,wBACA,YAAK,GAAG,CAAEtB,IAAI,CAACyB,SAAf,CACI,SAAS,CAAC,KADd,CAEI,GAAG,CAAEF,QAFT,EADA,cAKA,oCACI,mBAAIvB,IAAI,CAACwB,QAAT,EADJ,cAEI,4CAFJ,GALA,cASA,kCACI,KAAC,MAAD,EACI,QAAQ,CAAExB,IAAI,CAACwB,QADnB,CAEI,QAAQ,CAAGH,SAFf,CAGI,YAAY,CAAE,KAAKxB,YAHvB,EADJ,EATA,GADJ,CAmBH,C,wBAjFoBL,KAAK,CAACkC,S,EAoF/B,cAAe/B,CAAAA,UAAf","sourcesContent":["import React from 'react';\nimport { getHeaders } from '../utils.js';\nimport Follow from './Follow.js'\n\nclass Suggestion extends React.Component {\n    constructor(props){\n        super(props)\n        this.toggleFollow = this.toggleFollow.bind(this)\n        this.state = {\n            user: this.props.suggestion,\n            followId: 0\n        }\n    }\n\n    toggleFollow() {\n        console.log('button-clicked')\n\n        if (this.state.followId) {\n            // issue post request\n            this.unFollow()\n        } else {\n            // issue delete request\n            this.follow()\n        }\n    }\n\n    unFollow() {\n        const deleteURL = `/api/following/${this.state.followId}`\n\n        fetch(deleteURL, {\n            method: \"DELETE\",\n            headers: getHeaders()\n        })\n        .then(response => response.json())\n        .then(data => {\n            console.log(data);\n            this.setState({\n                followId: 0\n            })\n        });\n    }\n\n    follow() {\n        const postData = {\n            \"user_id\": this.state.user.id\n        }\n        fetch(`/api/following/`, {\n            method: \"POST\",\n            headers: getHeaders(),\n            body: JSON.stringify(postData)\n        })\n        .then(response => response.json())\n        .then(data => {\n            console.log(data);\n            this.setState({\n                followId: data.id\n            })\n        });\n    }\n\n    render () {\n        const user = this.state.user\n        const follow_id = this.state.followId\n        const user_id = \"suggestion-\" + user.id\n        const alt_text = \"Profile pic for \" + user.username\n\n        return (\n            <section id={user_id}>\n            <img src={user.thumb_url} \n                className=\"pic\" \n                alt={alt_text}>\n            </img>\n            <div>\n                <p>{user.username}</p>\n                <p>\"suggested for you\"</p>\n            </div>\n            <div>\n                <Follow\n                    username={user.username} \n                    followId= {follow_id} \n                    toggleFollow={this.toggleFollow}>\n                </Follow>\n            </div>\n            </section>\n        )\n    }\n}\n\nexport default Suggestion"]},"metadata":{},"sourceType":"module"}